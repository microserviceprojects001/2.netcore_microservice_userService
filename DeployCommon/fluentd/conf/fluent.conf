<source>
  @type http
  port 9880
  bind 0.0.0.0
  tag http.input
  <parse>
    @type json
  </parse>
</source>

<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<filter **>
  @type record_transformer
  <record>
    hostname "#{Socket.gethostname}"
    service "my_windows_app"
  </record>
</filter>

<filter **>
  @type parser
  key_name log
  reserve_data true
  remove_key_name_field false
  <parse>
    @type json
  </parse>
</filter>

<match **>
  @type elasticsearch
  host es-master
  port 9200
  logstash_format true
  logstash_prefix fluentd
  template_name "fluentd_template"  # 指定模板名称
  template_overwrite true           # 允许覆盖已存在的模板
  flush_interval 5s
</match>

<match **>
  @type stdout
</match>