# 单体架构

![alt text](<课程截图/1. 单体架构.png>)

此图介绍了：
单体架构的 组成部分，以及优缺点

其中缺点+1
比方说秒杀流量上来了，无法但对这个业务扩容

API 扩展，增加服务器，拷贝 API，然后添加负载均衡

# 当 新增服务器，API 服务 进行 copy 之后，是不是 想 BLL 和 DAL 涉及到的 dll 都得 copy 一下

- 在单体架构中，当新增服务器并复制 API 服务时，确实需要同时复制 BLL 和 DAL 相关的 DLL 文件
  单体架构的部署单元：在传统单体中，所有分层（API、BLL、DAL）通常编译为一个整体部署包（如.NET 的 WebApplication.dll+BusinessLogic.dll+DataAccess.dll，或 Java 的单一 WAR 包）。

- 强依赖关系：API 层直接调用 BLL 层的方法，BLL 层又依赖 DAL 层，因此缺少任一 DLL 都会导致运行时失败。

# 比方说这是一个 购物系统，某一个时刻 有秒杀活动，但是这个架构不可以单独对秒杀业务进行扩展哈

是的，在传统的单体架构下，如果购物系统中只有秒杀业务面临高并发压力，而其他模块（如商品管理、用户中心）负载正常，此时确实无法单独扩展秒杀业务。这是单体架构的核心痛点之一

1. 为什么单体架构无法单独扩展秒杀业务？

```
(1) 代码层面：紧耦合
(2) 资源层面：共享数据库
   秒杀业务和普通业务共用同一个 MySQL 数据库，导致：

秒杀的高并发请求可能占满数据库连接池。

其他业务（如用户查询）因资源竞争变慢
(3) 部署层面：整体扩展
横向扩展时，必须完整部署整个单体应用（包括无关模块）：
```

2. 临时解决方案（在单体架构内优化）

(1) 代码分层隔离
将秒杀逻辑抽离到独立模块（仍属单体内部）：
(2) 使用缓存抗并发
用 Redis 处理秒杀请求，减轻数据库压力：
(3) 负载均衡策略
通过 Nginx 为秒杀 API 配置独立的路由和服务器组
本质：仍然是整体扩展，但至少可以定向扩容。

3. 终极方案：向微服务演进

# 比方说只修改 userService 里一小点代码，都会需要整体都打包，持续部署带来压力

# 单体架构是 依赖于 IIS 的吗

是否依赖 IIS 取决于具体的技术栈选择。单体架构本身是一种代码组织方式，并不强制依赖 IIS
